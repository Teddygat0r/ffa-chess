<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>Document</title>
        <link rel="stylesheet" href="main.css" />
    </head>
    <body>
        <div class="container">
            <dialog id="promotion">
                <div class="pr-box">
                    <div class="pr-item">
                        <button onclick="promote('Queen')">
                            <img src="assets/QueenW.png" />
                        </button>
                    </div>
                    <div class="pr-item">
                        <button onclick="promote('Rook')">
                            <img src="assets/RookW.png" />
                        </button>
                    </div>
                    <div class="pr-item">
                        <button onclick="promote('Bishop')">
                            <img src="assets/BishopW.png" />
                        </button>
                    </div>
                    <div class="pr-item">
                        <button onclick="promote('Knight')">
                            <img src="assets/KnightW.png" />
                        </button>
                    </div>
                </div>
            </dialog>
            <div class="chessboard" id="container">
                <!--<div class="row">
                    <div
                        ondrop="drop(event)"
                        ondragover="allowDrop(event)"
                        class="cell light"
                        id="cell-0-0">
                        <img  />
                    </div>
                </div>-->
            </div>
            <div>
                <button class="arrow-button left" onclick="getPreviousBoard()">&larr;</button>
                <button class="arrow-button right" onclick="getNextBoard()">&rarr;</button>
            </div>
            <div class="turn-id" id="turn">
                
            </div>
        </div>
        <!-- remove-->
        <ul id="messages"></ul>
        <form id="form" action="">
            <input id="input" autocomplete="off" /><button>Send</button>
        </form>

        <script src="/socket.io/socket.io.js"></script>

        <script>
            //Create the chess board using a loop
            const container = document.getElementById("container");
            for (let i = 0; i < 8; i++) {
                const row = document.createElement("div");
                container.appendChild(row).className = "row";
                for (let j = 0; j < 8; j++) {
                    //cell properties

                    const cell = document.createElement("div");
                    cell.className =
                        (i + j) % 2 == 0 ? "cell light" : "cell dark";
                    cell.id = `cell-${i}-${j}`;

                    const button = document.createElement("button");
                    button.addEventListener("click", (e) => {
                        e.preventDefault();
                        socket.emit("getLegalTiles", 7 - i, j);
                    });

                    cell.appendChild(button);
                    button.appendChild(document.createElement("img"));
                    row.appendChild(cell);
                }
            }
        </script>

        <script src="index.js">
            
        </script>
    </body>
</html>
